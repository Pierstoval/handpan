var HandpanHit=function(){function a(t,e,n){if(!a.isValidHitType(t))throw"Invalid hit type";this.type=t}return a.isValidHitType=function(e){return 0<this.types.filter(function(t){return t.type===e}).length},a.getRandomHit=function(){return this.types[Math.floor(Math.random()*this.types.length)]},a.types=[{type:"ding",needs_notes:0},{type:"slam",needs_notes:0},{type:"left_slam",needs_notes:0},{type:"right_slam",needs_notes:0},{type:"ghost",needs_notes:0},{type:"punch",needs_notes:0},{type:"any_note",needs_notes:0},{type:"note",needs_notes:1},{type:"double",needs_notes:2},{type:"triple",needs_notes:3},{type:"staccato",needs_notes:1},{type:"brush_up",needs_notes:2},{type:"brush_down",needs_notes:2},{type:"harmonic",needs_notes:1}],a}(),App=function(){function t(t,e,n,a,s,i,r,o,p){this.handpan_tune=[{note:"C",alter:"#",octave:3,position:0},{note:"G",alter:"#",octave:3,position:1},{note:"A",alter:"",octave:4,position:2},{note:"B",alter:"",octave:4,position:3},{note:"C",alter:"#",octave:4,position:4},{note:"D",alter:"#",octave:4,position:5},{note:"E",alter:"",octave:4,position:6},{note:"F",alter:"#",octave:4,position:7},{note:"G",alter:"#",octave:4,position:8}],this.document=t,this.patterns_container=e,this.handpan_notes_input=n,this.handpan_notes_result_element=a,this.number_of_bars_input=s,this.number_of_bars_result_element=i,this.rhythm_inputs=o,this.regenerate_button=r,this.rhythm_input_to_enable=p}return t.prototype.run=function(){var e=this;this.regenerate_button.addEventListener("click",function(){return e.update()}),this.rhythm_input_to_enable.checked=!0,this.rhythm_inputs.forEach(function(t){return t.addEventListener("change",function(){return e.update()})}),this.number_of_bars_input.value="2",this.number_of_bars_input.addEventListener("input",function(){return e.update()}),this.update()},t.prototype.update=function(){var t=Number(this.number_of_bars_input.value),e=this.getRadioButtonValue(this.rhythm_inputs);this.number_of_bars_result_element.innerText=String(t),this.patterns_container.setAttribute("data-rhythm",e),this.patterns_container.innerHTML="";for(var n=!1,a=t*e,s=0;s<a;s++){var i=HandpanHit.getRandomHit(),r=this.createPatternItem(i);if(this.patterns_container.appendChild(r),r.classList.add(n?"hand-left":"hand-right"),r.classList.add(i.type),n=!n,s&&(s+1)%e==0&&s+1<a){var o=document.createElement("span");o.className="pattern_time_separator",this.patterns_container.appendChild(o)}}},t.prototype.createPatternItem=function(t){var e=document.createElement("div");e.className="pattern_item";var n=document.createElement("span");if(n.className="inner",n.innerText=t.type,e.appendChild(n),t.needs_notes){var a=document.createElement("div");a.className="notes";for(var s=[],i=0;i<t.needs_notes;i++){var r=this.handpan_tune[Math.floor(Math.random()*this.handpan_tune.length)],o=r.note+r.alter+r.octave;s.push(o)}a.innerHTML=s.join("<br>"),e.appendChild(a)}return e},t.prototype.getRadioButtonValue=function(t){for(var e=0,n=t;e<n.length;e++){var a=n[e];if(a.checked)return a.value}return null},t}();
